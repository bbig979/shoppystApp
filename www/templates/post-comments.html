<ion-view id="post-detail" view-title="COMMENTS">
    <ion-content>
        <p class="load-more grey-small-font" ng-click="loadMoreComments()" ng-if="commentsHiddenCount">load previous comments ({{ commentsHiddenCount }})</p>
        <ion-list>
            <ion-item class="item item-avatar item-text-wrap" ng-repeat="comment in post.latest_ten_comments" href="#">
                <img ng-click="loadProfile(comment.user.slug)" ng-src="{{ photoPath( comment.user.profile_img_path, 's' ) }}" class="profile-image">
                <div ng-click="loadProfile(comment.user.slug)" class="user-name">{{ comment.user.first_name }} {{ comment.user.last_name }}</div>
                <p>{{ comment.content }}</p>
                <span class="time-ago grey-small-font" am-time-ago="comment.created_at | amUtc"></span>
                <ion-option-button class="button-assertive" ng-click="remComment($index)" ng-if="ownComment($index)">Delete</ion-option-button>
            </ion-item>
        </ion-list>
        <form name="commentForm" ng-submit="submitComment()">
            <div class="list">
                <div class="item item-input-inset">
                    <label class="item-input-wrapper">
                        <input name="comment" type="text" id="comment" placeholder="Write a comment..." ng-model="comment.content">
                    </label>
                    <button class="button button-small">
                        Submit
                    </button>
                </div>
            </div>
        </form>
    </ion-content>
</ion-view>