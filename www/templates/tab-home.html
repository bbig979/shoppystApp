<ion-view class="single-post" id="home" view-title="<img class='title-image' src='img/logo.png'/>">
    <ion-content>
        <ion-refresher
                pulling-text="Pull to refresh..."
                on-refresh="doRefresh()">
        </ion-refresher>
        <div class="no-result" ng-if="noResult">
            Check out the explore tab below and start following others
        </div>
        <div class="loading-spinner" data-loading ng-if="posts.length == 0 && !noMoreItemsAvailable">
            <ion-spinner></ion-spinner>
        </div>
        <ion-list>

            <ion-item ng-repeat="post in posts">
                <div class="post-header">
                    <a>
                        <div class="profile-image" ng-click="goAccount(post.user.slug)" style="background-image: url( {{ photoPath( post.user.profile_img_path, 's' ) }} )"></div>
                        <div class="user-name" ng-click="goAccount(post.user.slug)">{{ post.user.first_name }} {{ post.user.last_name }}</div>
                    </a>
                    <span class="time-ago grey-small-font desc_time" ng-if="post"><i class="fa {{post.time_icon}}" aria-hidden="true"></i> {{post.created_from}} Left</span>
                    <ion-spinner icon="ios-small" ng-if="!post"></ion-spinner>
                </div>
                <div class="post-image">
                    <img ng-src="{{ photoPath( post.photos[0].img_path, 'l' ) }}">
                </div>
                <div class="button-group">
                    <button class= "button button-clear button-dark icon" ng-click="likeClicked($event,post)" ng-class="post.user_liked ? 'ion-ios-heart' : 'ion-ios-heart-outline'"></button>
                    <button class="button button-clear button-dark icon ion-ios-chatbubble-outline" ng-click="commentsPage(post.id)"></button>
                    <button class="button button-clear button-dark icon ion-ios-more-outline" ng-click="moreOption(post.id)"></button>
                    <button class="button button-clear button-dark icon add-compare-button" ng-class="{'ion-minus' : compareIndexList[post.id], 'ion-plus' : !compareIndexList[post.id]}" ng-click="addCompare(post.id)"></button>
                </div>
                <hr size="1" color="#e7e7e7">
                <div class="analytics-group">
                    <div class="analytics-gender">
                        <div class="analytics-number">
                            <div>{{ getStatGenderPercent(post.post_analytic[0], "m") }}%</div>
                            <div>{{ getStatGenderPercent(post.post_analytic[0], "f") }}%</div>
                        </div>
                        <div class="analytics-label">
                            <div>Male</div>
                            <div>Female</div>
                        </div>
                    </div>
                    <div class="analytics-age">
                        <div class="analytics-number">
                            <div>{{ getStatAgePercent(post.post_analytic[0], "10") }}%</div>                            
                            <div>{{ getStatAgePercent(post.post_analytic[0], "20") }}%</div>                            
                            <div>{{ getStatAgePercent(post.post_analytic[0], "30") }}%</div>                            
                            <div>{{ getStatAgePercent(post.post_analytic[0], "40") }}%</div>                            
                            <div>{{ getStatAgePercent(post.post_analytic[0], "50") }}%</div>                            
                        </div>
                        <div class="analytics-label">
                            <div>10-19</div>
                            <div>20-29</div>
                            <div>30-39</div>
                            <div>40-49</div>
                            <div>50-59</div>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
                <hr size="1" color="#e7e7e7">
                <div class="stats">
                    <span class="likes-count" ng-click="goPostLikers(post.id)"><i class="ion-ios-heart"></i> <span ng-hide="post.likes_count.aggregate">0</span>{{ post.likes_count.aggregate }} likes</span>
                    <span class="comments-count" ng-if="post.comments_count.aggregate" ng-click="commentsPage(post.id)">
                        <i class="ion-ios-chatbubble"></i>
                        <span class="dynamic-comment-count" id="{{post.id}}">{{ post.comments_count.aggregate }}</span> comments
                    </span>
                    <span class="comments-count" ng-if="!post.comments_count.aggregate" ng-click="commentsPage(post.id)">
                        <i class="ion-ios-chatbubble"></i>
                        <span class="dynamic-comment-count" id="{{post.id}}">0</span> comments
                    </span>
                </div>
                <p class="content" ng-bind-html="linkHashTag(post.content) | unsafe"></p>
                <div class="divider">

                </div>

            </ion-item>

        </ion-list>

        <ion-infinite-scroll ng-if="!noMoreItemsAvailable" on-infinite="loadMore()" distance="10%" immediate-check="false"></ion-infinite-scroll>

    </ion-content>
</ion-view>
