<ion-view id="tab-account" class="masonry-post-list" view-title="PROFILE">
    <ion-content>
        <ion-refresher
                pulling-text="Pull to refresh..."
                on-refresh="doRefresh()">
        </ion-refresher>
        <div class="account-top" style="background-image: url( {{ photoPath( user.cover_img_path, '' ) }} )">
            <button class="button button-clear icon ion-gear-b account-option-btn" ng-click="goAccountOption()" ng-if="isMyAccount"></button>
            <button class="button button-small follow-toggle" ng-class="{'following' : user.following_check}" ng-click="followToggle(user)" ng-if="notMe(user)"></button>
            <div class="account-image" style="background-image: url( {{ photoPath( user.profile_img_path, 's' ) }} )" ng-click="goChangeProfilePicture()"></div>
            <div class="user-name">{{ user.first_name }} {{ user.last_name }}</div>
            <div class="user-school" ng-click="goSchoolDetail(user.school.id, user.school.name)" ng-if="user.school.id != 0">{{ user.school.name }}</div>
            <div class="user-joined">Joined at <span class="time-ago" am-time-ago="user.created_at | amUtc" ng-if="user"></span></div>
            <div class="account-achievement row">
                <div class="button button-clear icon account-post-btn ion-camera col" ng-click="goAccountPost()"><br>{{user.posts_count}}<br>Posts</div>
                <button class="button button-clear icon account-like-btn ion-ios-heart col" ng-click="goAccountLiked(user.slug)"><br>{{user.likes_count}}<br>Likes</button>
                <button class="button button-clear icon account-followers-btn ion-ios-people col" ng-click="goAccountFollower(user.slug)">
                    <br><span class="dynamic-follower-count">{{user.follower_count}}</span><br>Followers
                </button>
                <button class="button button-clear icon account-following-btn ion-android-person col" ng-click="goAccountFollowing(user.slug)">
                    <br><span class="dynamic-following-count">{{user.following_count}}</span><br>Following
                </button>
            </div>
            <div class="account-social-network row">
                <button class="button button-clear icon col ion-social-facebook account-facebook-btn" ng-click="goAccountSocialNetwork('facebook')" ng-if="user.social_networks.facebook"></button>
                <button class="button button-clear icon col ion-social-twitter account-twitter-btn" ng-click="goAccountSocialNetwork('twitter')" ng-if="user.social_networks.twitter"></button>
                <button class="button button-clear icon col ion-social-instagram-outline account-instagram-btn" ng-click="goAccountSocialNetwork('instagram')" ng-if="user.social_networks.instagram"></button>
                <button class="button button-clear icon col ion-social-pinterest account-pinterest-btn" ng-click="goAccountSocialNetwork('pinterest')" ng-if="user.social_networks.pinterest"></button>
            </div>
            <ion-spinner icon="ios-small" ng-if="!user"></ion-spinner>
        </div>
        <div class="loading-spinner" data-loading ng-if="posts.length == 0">
            <ion-spinner></ion-spinner>
        </div>
        <ion-list>
            <div masonry preserve-order>
                <ion-item ng-repeat="post in posts" class="masonry-brick" data-id="{{ post.id }}">
                    <img ng-src="{{ photoPath( post.photos[0].img_path, 'm' ) }}" ng-click="goPostDetail(post.id)">
                </ion-item>
            </div>
        </ion-list>
        <ion-infinite-scroll ng-if="!noMoreItemsAvailable" on-infinite="loadMore()" distance="10%" immediate-check="false"></ion-infinite-scroll>
    </ion-content>
</ion-view>
